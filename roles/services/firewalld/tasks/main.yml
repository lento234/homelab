- name: Install firewalld
  become: true
  dnf:
    name: firewalld
    state: present

- name: Configure ports in firewalld
  become: true
  ansible.posix.firewalld:
    state: enabled
    port: "{{ item }}"
    zone: public
    permanent: true
    immediate: true
  with_items:
    - "{{ ports }}"

- name: Ensure firewalld is restarted
  become: true
  service:
    name: firewalld
    enabled: true
    state: restarted
